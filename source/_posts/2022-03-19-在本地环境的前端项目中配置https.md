---
title: 在本地环境的前端项目中配置https
date: 2022-03-19 22:12:17
tags:
  - HTTPS
---


## 前言

这几天在看一个大佬的博客，看到这个标题 [Local HTTPS](https://shanyue.tech/frontend-engineering/local-https.html) 的时候，一个大大的问号浮现在我的脑海中，本地还能https？

于是带着好奇跟着文章的步骤一步步来，发现果然可行，然后就觉得自己知识面又加宽了:muscle:。

其实很久以前我就听说过HTTPS的鼎鼎大名，知道它是HTTP协议的安全版本，但是也仅此而已，可以说对HTTPS的了解一无所知吧:cry:。

于是今天在网上找了[一篇文章](https://juejin.cn/post/6925296374628122632)稍微了解了一下，知道了它大概的原理，然后就觉得自己知识面又加宽了:muscle:。

逃~):running:

## 使用 mkcert

因为我使用的是Windows，所以 [Install for Windows](https://github.com/FiloSottile/mkcert#windows)，其它的操作系统找到对应方式安装即可。

```bash
# 安装 mkcert 
$ choco install mkcert

# 为本地环境安装 CA
$ mkcert -install
Created a new local CA 💥
The local CA is now installed in the system trust store! ⚡️
The local CA is now installed in the Firefox trust store (requires browser restart)! 🦊

# 切换到你的项目根目录
$ cd /path/to/your_project_root_path

# 生成证书
$ mkcert w2xi.tech '*.w2xi.tech' w2xi.test localhost 127.0.0.1 ::1
Created a new certificate valid for the following names 📜
 - "w2xi.tech"
 - "*.w2xi.tech"
 - "w2xi.test"
 - "localhost"
 - "127.0.0.1"
 - "::1"

Reminder: X.509 wildcards only go one level deep, so this won't match a.b.w2xi.tech ℹ️

The certificate is at "./w2xi.tech+5.pem" and the key at "./w2xi.tech+5-key.pem" ✅

It will expire on 19 June 2024 🗓
```

最终成功安装了 CA，并生成 <code>cert</code> 及 <code>key</code> 两个文件，文件目录如下，接下来的步骤会用到这两个文件。

```javascript
{
  key: './w2xi.tech+5-key.pem',
  cert: './w2xi.tech+5.pem',
}
```

### 在 Webpack 中配置 https

我测试的项目是基于 <code>vue-cli4</code> 的，所以直接在 <code>vue.config.js</code> 配置即可。

```javascript
const fs = require('fs')

module.exports = {
  //...
  devServer: {
    https: true,
    key: fs.readFileSync('./w2xi.tech+5-key.pem'),
    cert: fs.readFileSync('./w2xi.tech+5.pem'),
  }
}
```

启动项目，即可运行在 <code>https</code> 环境中了:rocket:。

## 最后

阅读大佬的博客，深刻地感受到了自己的渺小。

路还很长，但贵在坚持。

加油，打工人。

## 参考

[https://shanyue.tech/frontend-engineering/local-https.html](https://shanyue.tech/frontend-engineering/local-https.html)

[https://github.com/FiloSottile/mkcert](https://github.com/FiloSottile/mkcert)

[https://juejin.cn/post/6925296374628122632](https://juejin.cn/post/6925296374628122632)

[https://www.cnblogs.com/you-men/p/13955113.html](https://www.cnblogs.com/you-men/p/13955113.html)
---
title: åœ¨æœ¬åœ°ç¯å¢ƒçš„å‰ç«¯é¡¹ç›®ä¸­é…ç½®https
date: 2022-03-19 22:12:17
tags:
  - HTTPS
---


## å‰è¨€

è¿™å‡ å¤©åœ¨çœ‹ä¸€ä¸ªå¤§ä½¬çš„åšå®¢ï¼Œçœ‹åˆ°è¿™ä¸ªæ ‡é¢˜ [Local HTTPS](https://shanyue.tech/frontend-engineering/local-https.html) çš„æ—¶å€™ï¼Œä¸€ä¸ªå¤§å¤§çš„é—®å·æµ®ç°åœ¨æˆ‘çš„è„‘æµ·ä¸­ï¼Œæœ¬åœ°è¿˜èƒ½httpsï¼Ÿ

äºæ˜¯å¸¦ç€å¥½å¥‡è·Ÿç€æ–‡ç« çš„æ­¥éª¤ä¸€æ­¥æ­¥æ¥ï¼Œå‘ç°æœç„¶å¯è¡Œï¼Œç„¶åå°±è§‰å¾—è‡ªå·±çŸ¥è¯†é¢åˆåŠ å®½äº†:muscle:ã€‚

å…¶å®å¾ˆä¹…ä»¥å‰æˆ‘å°±å¬è¯´è¿‡HTTPSçš„é¼é¼å¤§åï¼ŒçŸ¥é“å®ƒæ˜¯HTTPåè®®çš„å®‰å…¨ç‰ˆæœ¬ï¼Œä½†æ˜¯ä¹Ÿä»…æ­¤è€Œå·²ï¼Œå¯ä»¥è¯´å¯¹HTTPSçš„äº†è§£ä¸€æ— æ‰€çŸ¥å§:cry:ã€‚

äºæ˜¯ä»Šå¤©åœ¨ç½‘ä¸Šæ‰¾äº†[ä¸€ç¯‡æ–‡ç« ](https://juejin.cn/post/6925296374628122632)ç¨å¾®äº†è§£äº†ä¸€ä¸‹ï¼ŒçŸ¥é“äº†å®ƒå¤§æ¦‚çš„åŸç†ï¼Œç„¶åå°±è§‰å¾—è‡ªå·±çŸ¥è¯†é¢åˆåŠ å®½äº†:muscle:ã€‚

é€ƒ~):running:

## ä½¿ç”¨ mkcert

å› ä¸ºæˆ‘ä½¿ç”¨çš„æ˜¯Windowsï¼Œæ‰€ä»¥ [Install for Windows](https://github.com/FiloSottile/mkcert#windows)ï¼Œå…¶å®ƒçš„æ“ä½œç³»ç»Ÿæ‰¾åˆ°å¯¹åº”æ–¹å¼å®‰è£…å³å¯ã€‚

```bash
# å®‰è£… mkcert 
$ choco install mkcert

# ä¸ºæœ¬åœ°ç¯å¢ƒå®‰è£… CA
$ mkcert -install
Created a new local CA ğŸ’¥
The local CA is now installed in the system trust store! âš¡ï¸
The local CA is now installed in the Firefox trust store (requires browser restart)! ğŸ¦Š

# åˆ‡æ¢åˆ°ä½ çš„é¡¹ç›®æ ¹ç›®å½•
$ cd /path/to/your_project_root_path

# ç”Ÿæˆè¯ä¹¦
$ mkcert w2xi.tech '*.w2xi.tech' w2xi.test localhost 127.0.0.1 ::1
Created a new certificate valid for the following names ğŸ“œ
 - "w2xi.tech"
 - "*.w2xi.tech"
 - "w2xi.test"
 - "localhost"
 - "127.0.0.1"
 - "::1"

Reminder: X.509 wildcards only go one level deep, so this won't match a.b.w2xi.tech â„¹ï¸

The certificate is at "./w2xi.tech+5.pem" and the key at "./w2xi.tech+5-key.pem" âœ…

It will expire on 19 June 2024 ğŸ—“
```

æœ€ç»ˆæˆåŠŸå®‰è£…äº† CAï¼Œå¹¶ç”Ÿæˆ <code>cert</code> åŠ <code>key</code> ä¸¤ä¸ªæ–‡ä»¶ï¼Œæ–‡ä»¶ç›®å½•å¦‚ä¸‹ï¼Œæ¥ä¸‹æ¥çš„æ­¥éª¤ä¼šç”¨åˆ°è¿™ä¸¤ä¸ªæ–‡ä»¶ã€‚

```javascript
{
  key: './w2xi.tech+5-key.pem',
  cert: './w2xi.tech+5.pem',
}
```

### åœ¨ Webpack ä¸­é…ç½® https

æˆ‘æµ‹è¯•çš„é¡¹ç›®æ˜¯åŸºäº <code>vue-cli4</code> çš„ï¼Œæ‰€ä»¥ç›´æ¥åœ¨ <code>vue.config.js</code> é…ç½®å³å¯ã€‚

```javascript
const fs = require('fs')

module.exports = {
  //...
  devServer: {
    https: true,
    key: fs.readFileSync('./w2xi.tech+5-key.pem'),
    cert: fs.readFileSync('./w2xi.tech+5.pem'),
  }
}
```

å¯åŠ¨é¡¹ç›®ï¼Œå³å¯è¿è¡Œåœ¨ <code>https</code> ç¯å¢ƒä¸­äº†:rocket:ã€‚

## æœ€å

é˜…è¯»å¤§ä½¬çš„åšå®¢ï¼Œæ·±åˆ»åœ°æ„Ÿå—åˆ°äº†è‡ªå·±çš„æ¸ºå°ã€‚

è·¯è¿˜å¾ˆé•¿ï¼Œä½†è´µåœ¨åšæŒã€‚

åŠ æ²¹ï¼Œæ‰“å·¥äººã€‚

## å‚è€ƒ

[https://shanyue.tech/frontend-engineering/local-https.html](https://shanyue.tech/frontend-engineering/local-https.html)

[https://github.com/FiloSottile/mkcert](https://github.com/FiloSottile/mkcert)

[https://juejin.cn/post/6925296374628122632](https://juejin.cn/post/6925296374628122632)

[https://www.cnblogs.com/you-men/p/13955113.html](https://www.cnblogs.com/you-men/p/13955113.html)